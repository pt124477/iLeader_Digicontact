import r from'./../../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import e from"../../../token.js";import t from"../../../../utils/query-string.js";import{apiResponse as s}from"../../../../utils/response.js";import{PAYMENT_APIS as a,APP_ID as o}from"../../../../constants.js";import n from"../getRouteParams.js";import{__generator as i}from'./../../../../external/tslib/tslib.es6.js';var m,d=(m=r((function(r){var m,d,c,p,u,f,l,g,h;return i(this,(function(i){switch(i.label){case 0:return r||(r=n()),"object"==typeof r&&(m=r.appTransID||r.orderId||r.apptransid),"string"==typeof r&&(d=t.getParameterByName("orderId",r),c=t.getParameterByName("appTransID",r)||t.getParameterByName("apptransid",r),m=d||c),p={headers:{authorization:"Bearer "}},[4,e.getAccessToken().catch((function(){throw s.error.loginRequired}))];case 1:return u=i.sent(),p.headers.authorization="Bearer ".concat(u),f=new URL(a.GET_TRANSACTION),l={transId:m||"",appId:o},f.search=new URLSearchParams(l).toString(),[4,fetch(f.toString(),p)];case 2:return[4,i.sent().json()];case 3:if(!(g=i.sent()).data||0!==g.err)throw s.error.badRequest(g.msg);return[2,{msg:(h=g.data||{}).resultMessage,orderId:h.orderId,resultCode:h.resultCode,transTime:h.transTime,createdAt:h.createAt,transId:h.transId}]}}))})),function(r){return m.apply(this,arguments)});export{d as default};
